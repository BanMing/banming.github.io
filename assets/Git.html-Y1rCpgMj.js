import{_ as n}from"./plugin-vue_export-helper-x3n3nnut.js";import{r as t,o as i,c as o,a as e,b as c,d as r,e as a}from"./app-tRzJzC4Q.js";const l={},d=a(`<h1 id="git" tabindex="-1"><a class="header-anchor" href="#git" aria-hidden="true">#</a> Git</h1><h2 id="ssh" tabindex="-1"><a class="header-anchor" href="#ssh" aria-hidden="true">#</a> SSH</h2><ul><li><p>github-key —— 私钥</p></li><li><p>github-key.pub —— 公钥</p></li><li><p>https://gitee.com/help/articles/4229#article-header0</p></li><li><p>https://www.cnblogs.com/cangqinglang/p/11727867.html</p></li><li><p>https://docs.github.com/cn/free-pro-team@latest/github/authenticating-to-github/connecting-to-github-with-ssh</p></li></ul><h2 id="使用git把某一次commit修改过的文件打包" tabindex="-1"><a class="header-anchor" href="#使用git把某一次commit修改过的文件打包" aria-hidden="true">#</a> 使用git把某一次commit修改过的文件打包</h2><p>把新增加的文件使用git add添加进改动</p><p>使用git commit提交改动 使用git log查看提交的commit id</p><p>使用命令</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">git</span> diff-tree <span class="token parameter variable">-r</span> --no-commit-id --name-only 23cde4766b6d879cbae59c5ee9705f5694acb707 <span class="token operator">|</span> <span class="token function">xargs</span> <span class="token function">tar</span> <span class="token parameter variable">-rf</span> mytarfile.tar
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="快速更新submodule" tabindex="-1"><a class="header-anchor" href="#快速更新submodule" aria-hidden="true">#</a> 快速更新submodule</h2><p>If it&#39;s the first time you check-out a repo you need to use --init first:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">git</span> submodule update <span class="token parameter variable">--init</span> <span class="token parameter variable">--recursive</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>For git 1.8.2 or above, the option --remote was added to support updating to latest tips of remote branches:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">git</span> submodule update <span class="token parameter variable">--recursive</span> <span class="token parameter variable">--remote</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>如果更新补下来子集，可以直接进入子集文件夹 ，然后<code>clone</code>下来即可。</p><p>把修改的文件打包</p><h2 id="两个远程仓库地址" tabindex="-1"><a class="header-anchor" href="#两个远程仓库地址" aria-hidden="true">#</a> 两个远程仓库地址</h2><p>添加远程</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">git</span> remote <span class="token function">add</span> 仓库A url
<span class="token function">git</span> remote <span class="token function">add</span> 仓库B url
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">git</span> remote <span class="token parameter variable">-v</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>合并其他源到本地分支</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">git</span> merge remote/branch
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="github-action-pages" tabindex="-1"><a class="header-anchor" href="#github-action-pages" aria-hidden="true">#</a> GitHub Action Pages</h2><p>在markdown仓库配置Action Repository secrets时，这里配置的时私钥，需要把私钥的所有内容复制（包括<code>-----BEGIN OPENSSH PRIVATE KEY-----</code>和最后一行）。在另一个仓库配置<code>Deloy Keys</code>就是配置公钥，可以不需要配置，如果在账户中设置了SSH的。</p>`,23),p={href:"https://zhuanlan.zhihu.com/p/170563000",target:"_blank",rel:"noopener noreferrer"},u=a(`<h2 id="ssh-连接不上" tabindex="-1"><a class="header-anchor" href="#ssh-连接不上" aria-hidden="true">#</a> SSH 连接不上</h2><p>既然和GitHub建立ssh连接的时候提示connection refused，那我们就详细看看建立ssh连接的过程中发生了什么，可以使用ssh -v命令，-v表示verbose，会打出详细日志。</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>$ <span class="token function">ssh</span> <span class="token parameter variable">-vT</span> git@github.com
OpenSSH_9.0p1, OpenSSL <span class="token number">1.1</span>.1o  <span class="token number">3</span> May <span class="token number">2022</span>
debug1: Reading configuration data /etc/ssh/ssh_config
debug1: Connecting to github.com <span class="token punctuation">[</span>::1<span class="token punctuation">]</span> port <span class="token number">22</span>.
debug1: connect to address ::1 port <span class="token number">22</span>: Connection refused
debug1: Connecting to github.com <span class="token punctuation">[</span><span class="token number">127.0</span>.0.1<span class="token punctuation">]</span> port <span class="token number">22</span>.
debug1: connect to address <span class="token number">127.0</span>.0.1 port <span class="token number">22</span>: Connection refused
ssh: connect to <span class="token function">host</span> github.com port <span class="token number">22</span>: Connection refused
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>从上面的信息马上就发现了诡异的地方，连接http://github.com的地址居然是::1和127.0.0.1。前者是IPV6的localhost地址，后者是IPV4的localhost地址。</p><p>到这里问题就很明确了，是DNS解析出问题了，导致http://github.com域名被解析成了localhost的ip地址，就自然连不上GitHub了。</p><p>Windows下执行ipconfig /flushdns 清楚DNS缓存后也没用，最后修改hosts文件，增加一条github.com的域名映射搞定。</p><p>140.82.113.4 github.com 查找http://github.com的ip地址可以使用https://www.ipaddress.com/来查询，也可以使用nslookup命令</p><p>nslookup github.com 8.8.8.8 nslookup是域名解析工具，8.8.8.8是Google的DNS服务器地址。直接使用</p><p>nslookup github.com 就会使用本机已经设置好的DNS服务器进行域名解析，ipconfig /all可以查看本机DNS服务器地址。</p><p>这个问题其实就是DNS解析被污染了，有2种可能：</p><p>DNS解析被运营商劫持了 使用了科学上网工具 按照我上面写的解决方案操作即可解决。</p><h3 id="references" tabindex="-1"><a class="header-anchor" href="#references" aria-hidden="true">#</a> References</h3><ul><li>https://chaxuri.com/archives/43.html</li><li>https://stackoverflow.com/questions/15589682/ssh-connect-to-host-github-com-port-22-connection-timed-out</li><li>https://docs.github.com/en/authentication/troubleshooting-ssh/error-permission-denied-publickey</li><li>https://gist.github.com/Tamal/1cc77f88ef3e900aeae65f0e5e504794</li></ul>`,13);function h(m,b){const s=t("ExternalLinkIcon");return i(),o("div",null,[d,e("p",null,[e("a",p,[c("GitHub Actions 来自动部署 Hexo"),r(s)])]),u])}const f=n(l,[["render",h],["__file","Git.html.vue"]]);export{f as default};
