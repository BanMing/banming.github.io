import{_ as e}from"./2022-12-23_10-40-Br8BDtOl.js";import{_ as a}from"./plugin-vue_export-helper-DlAUqK2U.js";import{e as s,f as t,o as i}from"./app-CY3QGuZ1.js";const l="/assets/2022-12-23_14-01-D9MyXsPT.png",p="/assets/2022-12-23_14-07-maW8nhE0.png",o="/assets/2022-12-23_14-10-DBN46vFn.png",r="/assets/2022-12-23_14-13-BsWN6Dac.png",c="/assets/2022-12-26_17-35-DQl-44N0.png",u="/assets/2022-12-29_10-35-CUaEs06h.png",d="/assets/2022-12-29_15-30-VOsOeXYx.png",m="/assets/2022-12-29_15-33-DJrPmgGD.png",g={};function h(b,n){return i(),s("div",null,n[0]||(n[0]=[t('<h1 id="multiplayer-shooter" tabindex="-1"><a class="header-anchor" href="#multiplayer-shooter"><span>Multiplayer Shooter</span></a></h1><p><a href="https://www.udemy.com/course/unreal-engine-5-cpp-multiplayer-shooter" target="_blank" rel="noopener noreferrer">https://www.udemy.com/course/unreal-engine-5-cpp-multiplayer-shooter</a></p><p>Peer-to-Peer, Client-Server</p><p>UE5 Uses an Authorirtative Client-Server Model</p><h2 id="多人游戏连接" tabindex="-1"><a class="header-anchor" href="#多人游戏连接"><span>多人游戏连接</span></a></h2><p>在打开场景的时候，可以设置当前场景是<code>listen</code>状态，然后另一台电脑可以直接使用命令行<code>Open Ip</code>进入，这有点东西。</p><figure><img src="'+e+`" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>同样可以使用代码加载关卡以及开启服务器：</p><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code><span class="line">	UWorld<span class="token operator">*</span> world <span class="token operator">=</span> <span class="token function">GetWorld</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">	<span class="token keyword">if</span> <span class="token punctuation">(</span>world<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">{</span></span>
<span class="line">		<span class="token comment">// /Game/ = Content floder</span></span>
<span class="line">		<span class="token comment">// ?listen, set the level is a listen server</span></span>
<span class="line">		world<span class="token operator">-&gt;</span><span class="token function">ServerTravel</span><span class="token punctuation">(</span><span class="token string">&quot;/Game/ThirdPerson/Maps/Lobby?listen&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>加入服务器可以使用：</p><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code><span class="line"><span class="token class-name">UGameplayStatics</span><span class="token double-colon punctuation">::</span><span class="token function">OpenLevel</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> IPAddress<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>或者使用：</p><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code><span class="line">	APlayerController<span class="token operator">*</span> playerController <span class="token operator">=</span> <span class="token function">GetGameInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">GetFirstLocalPlayerController</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">	<span class="token keyword">if</span> <span class="token punctuation">(</span>playerController<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">{</span></span>
<span class="line">		playerController<span class="token operator">-&gt;</span><span class="token function">ClientTravel</span><span class="token punctuation">(</span>IPAddress<span class="token punctuation">,</span> ETravelType<span class="token double-colon punctuation">::</span>TRAVEL_Absolute<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="online-subsystem" tabindex="-1"><a class="header-anchor" href="#online-subsystem"><span>Online Subsystem</span></a></h2><figure><img src="`+l+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>在<code>Engine.ini</code>中设置使用哪个平台的服务器：</p><figure><img src="'+p+`" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>使用一下代码来获取网络系统：</p><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code><span class="line">IOnlineSubsystem<span class="token operator">*</span> onlineSubsystem <span class="token operator">=</span> <span class="token class-name">IOnlineSubsystem</span><span class="token double-colon punctuation">::</span><span class="token function">Get</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="session-interface" tabindex="-1"><a class="header-anchor" href="#session-interface"><span>Session Interface</span></a></h2><p>其中最主要的接口是Session，他的主要工作如下:</p><figure><img src="`+o+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>Session的生命周期以及对应的几个关键方法：</p><figure><img src="'+r+`" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h2 id="online-subsystem-steam" tabindex="-1"><a class="header-anchor" href="#online-subsystem-steam"><span>Online Subsystem Steam</span></a></h2><p><a href="https://docs.unrealengine.com/4.27/en-US/ProgrammingAndScripting/Online/Steam/" target="_blank" rel="noopener noreferrer">https://docs.unrealengine.com/4.27/en-US/ProgrammingAndScripting/Online/Steam/</a></p><p>在插件中添加<code>OnlineSubsystemSteam</code>插件，并且需要在<code>.Build.cs</code>文件中的<code>PublicDependencyModuleNames</code>添加：</p><div class="language-c line-numbers-mode" data-highlighter="prismjs" data-ext="c"><pre><code><span class="line"><span class="token string">&quot;OnlineSubsystemSteam&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;OnlineSubsystem&quot;</span> </span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="game-instance" tabindex="-1"><a class="header-anchor" href="#game-instance"><span>Game Instance</span></a></h2><ul><li>Spawned at game creation</li><li>Not detroyed until the game is shut down</li><li>Persists between levels</li></ul><h2 id="game-instance-subsystem" tabindex="-1"><a class="header-anchor" href="#game-instance-subsystem"><span>Game Instance Subsystem</span></a></h2><ul><li>Created after the Game Instance is created</li><li>Destroyed and garbage collected when the Game Instance is shut down</li></ul><h2 id="game-state" tabindex="-1"><a class="header-anchor" href="#game-state"><span>Game State</span></a></h2><figure><img src="`+c+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h2 id="travel-in-multiplayer" tabindex="-1"><a class="header-anchor" href="#travel-in-multiplayer"><span>Travel in multiplayer</span></a></h2><figure><img src="'+u+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h2 id="enetrole" tabindex="-1"><a class="header-anchor" href="#enetrole"><span>ENetRole</span></a></h2><ul><li>ROLE_Authority ：服务器</li><li>ROLE_SimulatedProxy ： 本地其他客户端</li><li>ROLE_AutonomousProxy : 本地客户端</li><li>ROLE_None</li></ul><p>服务器上显示的角色类型如下图，其中最靠近屏幕的Pawn是本地控制角色：</p><figure><img src="'+d+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>客户端上显示的角色类型如下图，其中最靠近屏幕的Pawn是本地控制角色：</p><figure><img src="'+m+`" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h2 id="replicated" tabindex="-1"><a class="header-anchor" href="#replicated"><span>Replicated</span></a></h2><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">UPROPERTY(Replicated)</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>复制变量，只能从服务器复制到客户端上。不能再客户端上修改了值，同步到其他客户端。</p><p>这个方法调用的地方：<code>GetLifetimeReplicatedProps</code>：</p><ul><li><code>UClass::ValidateRuntimeReplicationData()</code></li><li><code>UClass::SetUpRuntimeReplicationData()</code></li><li><code>UNetDriver::HandleNetDumpServerRPCCommand( const TCHAR* Cmd, FOutputDevice&amp; Ar )</code></li></ul>`,47)]))}const y=a(g,[["render",h],["__file","Multiplayer Shooter.html.vue"]]),_=JSON.parse('{"path":"/GameEngine/Unreal/online/Multiplayer%20Shooter.html","title":"Multiplayer Shooter","lang":"en-US","frontmatter":{"date":"2022-12-22T19:19:24.000Z","tag":["Unreal Engine","Network","Gameplay","Project"]},"git":{"createdTime":1671707964000,"updatedTime":1707214279000,"contributors":[{"name":"BanMing","username":"BanMing","email":"ban-ming@foxmail.com","commits":9,"url":"https://github.com/BanMing"},{"name":"wupeng","username":"wupeng","email":"wupeng_a2484@virtuos.com.cn","commits":3,"url":"https://github.com/wupeng"}]},"readingTime":{"minutes":1.6,"words":479},"filePathRelative":"GameEngine/Unreal/online/Multiplayer Shooter.md","localizedDate":"December 22, 2022","excerpt":"\\n<p><a href=\\"https://www.udemy.com/course/unreal-engine-5-cpp-multiplayer-shooter\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">https://www.udemy.com/course/unreal-engine-5-cpp-multiplayer-shooter</a></p>\\n<p>Peer-to-Peer, Client-Server</p>\\n<p>UE5 Uses an Authorirtative Client-Server Model</p>\\n<h2>多人游戏连接</h2>"}');export{y as comp,_ as data};
